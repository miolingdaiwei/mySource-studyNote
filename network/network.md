## TCP

transport control 协议。是一种**面向连接可靠的**数据传输协议。是为了在不可靠的互联网上提**供可靠的端到端的字节流服务**的一个传输协议。

### 三次握手

三次握手是为了确认双方的接收能力和发送能力正常。建立tcp连接三次握手。

ack=1代表确认。seq序列号。

1. 第一次发送连接请求  seq=x
2. 第二次握手由tcp服务器，如果同意连接就发送确认报文  ack=1 syn=x+1
3. 第三次tcp客户端发送确认。  ack=1  seq=x+1

第三次握手时防止已经失效的连接请求报文突然又传送到了服务器，产生错误，避免多余了连接资源浪费。失效的连接由于tcp服务端没有接收到确认报文，不建立连接。

### 四次挥手

释放tcp连接需要四次挥手。

1. 第一次挥手，tcp客户端发出释放请求fin=1 seq=u
2. 第二次挥手，tcp服务端发送确认报文ACK=1,ack=u+1  客户端终止等待态
3. 第三次挥手，tcp服务端发送释放请求，fin=1  最后确认态
4. 第四次挥手，客户端发送确认报文ack=1

客户端会在发送确认后等待2MSL时间后关闭，服务端直接关闭。

## HTTP

http是无状态协议

1. 0.9:get,仅传输html
2. 1.0：新增post，head等方法，请求头，多种数据可传输，状态码，connection:keep-alive保持连接不断，但默认并不开启。
3. 1.1:长连接，tcp可被多个http请求，默认开启。管道机制。put，delete等方法。缓存字段。Host头。
4. 2：二进制数据传输，将请求内容封装成帧传输。可以多路复用，**服务端主动推送**。**头部压缩**

## TCP长连接

tcp分为长连接和短链接，

1. 长连接建立可以后续请求都通过这个连接
2. 短链接则是请求完成后断开连接

长连接通过keepAlive来实现，设置connection：keepalive


## Websocket

websocket是区别于http。

保持全双工通信，需要先创建连接，因此四有状态协议。且有更好的二进制支持，且有扩展性。控制开销更少，请求头部信息更少。
